<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>上传组件 DEMO</title>
  <link rel="stylesheet" href="../public/css/ST_admin.css"/>
  <style type="text/css">
    pre {
      background-color: #fff
    }
  </style>
  <script src="../public/js/jquery-min.js"></script>
  <script src="../public/js/ZeroClipboard/jquery.zclip.min.js"></script>
  <script src="../public/js/ST.Config.js"></script>
</head>
<body class="admin-frame">
<div id="_demo" class="m50">
   <table class="table table-listing table-striped">
     <tbody>
       <tr>
        <td class="right span4">HTML上传 <a class="fn_trigger" data-source="_code0" data-cmd="showCode" href="" title="查看代码">[code]</a></td>
        <td>
          <div class="file">
            <input class="input input-large fn_file_display" type="text">
            <input class="btn" type="button" value="浏览">
            <input class="file-mask" type="file" accept="image/jpeg,image/jpg,image/gif,image/png" onchange="ST.todo('fileFilling',this);">
          </div>
<pre id="_code0" data-title="HTML上传" style="display:none">
&lt;!--HTML部分--&gt;
&lt;div class="file"&gt;
  &lt;input class="input input-large fn_file_display" type="text&gt;
  &lt;input class="btn" type="button" value="浏览"/&gt;
  &lt;input class="file-mask" type="file" accept="image/jpeg,image/jpg,image/gif,image/png" title="上传文件" onchange="ST.todo('fileFilling',this);"&gt;
&lt;&gt;&lt;/div&gt;

&lt;!--JS部分--&gt;
&lt;!--引入common.js：定义了ST.fillFilling--&gt;
&lt;script src="__YOURPATH__/js/common.js"&gt;&lt;/script&gt;
</pre>
        </td>
      </tr>
      <tr>
        <td class="right span4">swfobject上传 <a class="fn_trigger" data-source="_code1" data-cmd="showCode" href="" title="查看代码">[code]</a></td>
        <td>
          <div class="mb5">
            <div class="file">
              <input class="input" type="text" id="simpleUploadText" readonly="readonly"/>
              <input class="btn" type="button" id="simpleUpload" value="浏览"/>
            </div>
            <input class="btn" type="button" id="simpleUpload_do" value="上传"/>
            <input id="upload_val" type="hidden"/>
          </div>
          <div id="upload_display" class="placeholder placeholder-upload">
            <!--if 未上传图片-->
            <div class="placeholder-inner">
              <div class="placeholder-content">
                <div class="placeholder-image"></div>
                <div class="placeholder-text">请上传图片</div>
              </div>
            </div>
            <!--else 已上传图片-->
            <!--<img src="图片地址" alt="">-->
            <!--end if-->
          </div>
<pre id="_code1" data-title="swfobject上传" style="display:none">
&lt;!--HTML部分--&gt;
&lt;div class="mb5"&gt;
  &lt;div class="file"&gt;
    &lt;input class="input" type="text" id="simpleUploadText" readonly="readonly"/&gt;
    &lt;input class="btn" type="button" <code>id="simpleUpload"</code> value="浏览"/&gt;
  &lt;/div&gt;
  &lt;input class="btn" type="button" <code>id="simpleUpload_do"</code> value="上传"/&gt;
  &lt;input id="upload_val" type="hidden"/&gt;&lt;!--值INPUT--&gt;
&lt;/div&gt;
&lt;!--图片预览区--&gt;
&lt;div id="upload_display" class="placeholder placeholder-upload"&gt;
  &lt;!--if 未上传图片--&gt;
  &lt;div class="placeholder-inner"&gt;
    &lt;div class="placeholder-content"&gt;
      &lt;div class="placeholder-image">&lt;/div&gt;
      &lt;div class="placeholder-text">请上传图片&lt;/div&gt;
    &lt;/div&gt;
  &lt;/div&gt;
  &lt;!--else 已上传图片--&gt;
  &lt;!--&lt;img src="图片地址" alt=""&gt;--&gt;
  &lt;!--end if--&gt;
&lt;/div&gt;

&lt;!--JS部分--&gt;
&lt;script src="__YOURPATH__/js/ST.Upload.js"&gt;&lt;/script&gt;
&lt;!--引入common.js：定义了上传按钮外观配置ST.upbtnConfig--&gt;
&lt;script src="__YOURPATH__/js/common.js"&gt;&lt;/script&gt;
&lt;script&gt;
//swfupload单个上传
  var upconfig = $.extend(ST.upbtnConfig || {}, {
    id: "simpleUpload",             //要替换的按钮ID
    upload_url: '__YOURURL__',      //上传地址
    uploadbtn: "simpleUpload_do",   //上传按钮
    preview: true,                  //是否预览
    previewHandle: function (file) {//预览回调
      $("#simpleUploadText").val(file.name);
    },
    title: "选择图片",//标题
    size: "200KB",    //文件大小（默认"2MB"）
    types:"",         //文件格式（默认"*.png;*.jpg;*.jpeg;*.gif"）
    post_params:{}    //附加参数
  });
  var simpleuploader = new ST.Upload(upconfig);
  simpleuploader.onUploadSuccess = function (j) {
    //此处范围会上传带路径的图片
    $("#upload_display").html('&lt;img src="' + j.data + '" /&gt;');
    //如需表单验证则取消下面注释
    //$("#upload_val").val(j.data).trigger('blur');
  }
&lt;/script&gt;
</pre>
        </td>
      </tr>
    </tbody>
  </table>
</div>
<script src="../public/js/doc/prettify.js"></script>
<script src="../public/js/ST_dev.js"></script>
<script src="../public/js/swfobject.js"></script>
<script src="../public/js/ST.Upload.js"></script>
<script src="../public/js/common.js"></script>
<script src="../public/js/demo/demo.js"></script>
<script type="text/javascript">
  ST.jsTemplates.push('common');
  $.extend(ST, {
    todoList: function () {
      var upconfig = $.extend(ST.upbtnConfig || {}, {
        id: "simpleUpload",
        upload_url: '',
        uploadbtn: "simpleUpload_do",
        preview: true,
        previewHandle: function (file) {
          $("#simpleUploadText").val(file.name);
        },
        title: "选择图片",
        size: "200KB"
      });
      var simpleuploader = new ST.Upload(upconfig);
      simpleuploader.onUploadSuccess = function (j) {
        //此处范围会上传带路径的图片
        $("#upload_display").html('<img src="' + j.data + '" />');
        //$("#upload_val").val(j.data).trigger('blur');//fix验证
      }
    }
  });
  ST.init();
</script>
</body>
</html>